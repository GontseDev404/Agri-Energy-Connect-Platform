@model ST10038937_prog7311_poe1.Models.ForumPost

@{
    ViewData["Title"] = Localizer["Forum Post Details"];
}

<h1 data-translate-key="Forum Post Details">Forum Post Details</h1>

<div>
    <h4 data-translate-key="Forum Post">Forum Post</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2" data-translate-key="Title">Title</dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Title)
        </dd>
        <dt class="col-sm-2" data-translate-key="Content">Content</dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Content)
        </dd>
        <dt class="col-sm-2" data-translate-key="Posted by">Posted by</dt>
        <dd class="col-sm-10">
            @(Model.User?.UserName ?? "Anonymous")
        </dd>
        <dt class="col-sm-2" data-translate-key="Posted on">Posted on</dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.CreatedAt)
        </dd>
    </dl>
</div>

@if (Model.Replies != null && Model.Replies.Any())
{
    <h3 data-translate-key="Replies">Replies</h3>
    <div class="replies-section">
        @foreach (var reply in Model.Replies.OrderBy(r => r.CreatedAt))
        {
            <div class="reply-item border-bottom pb-3 mb-3">
                <div class="reply-header">
                    <strong>@(reply.User?.UserName ?? "Anonymous")</strong>
                    <small class="text-muted">@reply.CreatedAt.ToString("MMM dd, yyyy HH:mm")</small>
                </div>
                <div class="reply-content mt-2">
                    @reply.Content
                </div>
                @if (User.IsInRole("Admin") || User.Identity?.Name == reply.User?.UserName)
                {
                    <div class="reply-actions mt-2">
                        <a asp-controller="Forum" asp-action="DeleteReply" asp-route-id="@reply.Id" class="btn btn-sm btn-outline-danger" data-translate-key="Delete">Delete</a>
                    </div>
                }
            </div>
        }
    </div>
}

<div>
    <a asp-action="Edit" asp-route-id="@Model?.Id" data-translate-key="Edit">Edit</a> |
    <a asp-action="Index" data-translate-key="Back to List">Back to List</a>
</div>
